<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>School Data Manager</title>
  <style>
    :root {
      color-scheme: light;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --bg: #f5f7fb;
      --card: #ffffff;
      --primary: #2b6cb0;
      --accent: #38b2ac;
      --text: #1a202c;
      --muted: #718096;
      --border: #e2e8f0;
      --danger: #e53e3e;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 2rem 1rem;
      color: var(--text);
    }

    .app {
      width: min(1200px, 100%);
      background: var(--card);
      border-radius: 18px;
      box-shadow: 0 24px 45px rgba(15, 23, 42, 0.12);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, var(--primary), #805ad5);
      color: white;
      padding: 2.5rem clamp(1.5rem, 3vw, 3rem);
    }

    header h1 {
      font-size: clamp(2rem, 4vw, 2.8rem);
      font-weight: 700;
      margin-bottom: 0.75rem;
      letter-spacing: -0.03em;
    }

    header p {
      max-width: 640px;
      line-height: 1.6;
      font-size: 1.05rem;
      color: rgba(255, 255, 255, 0.85);
    }

    header .stats {
      margin-top: 1.5rem;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .stat-pill {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 999px;
      padding: 0.6rem 1.4rem;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      padding: 1.25rem clamp(1.5rem, 3vw, 3rem);
      border-bottom: 1px solid rgba(226, 232, 240, 0.6);
      background: rgba(247, 250, 252, 0.72);
      backdrop-filter: blur(12px);
    }

    .nav-button {
      border: none;
      border-radius: 999px;
      padding: 0.65rem 1.35rem;
      font-weight: 600;
      letter-spacing: -0.01em;
      cursor: pointer;
      background: #edf2f7;
      color: var(--muted);
      transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .nav-button.active {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    main {
      padding: clamp(1.5rem, 3vw, 3rem);
      display: grid;
      gap: 2.2rem;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      background: white;
    }

    section {
      display: none;
      flex-direction: column;
      gap: 2rem;
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.25s ease, transform 0.3s ease;
    }

    section.active {
      display: flex;
      opacity: 1;
      transform: none;
    }

    .card {
      background: #f8fafc;
      border-radius: 16px;
      border: 1px solid rgba(226, 232, 240, 0.8);
      padding: clamp(1.25rem, 2vw, 2rem);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      box-shadow: 0 12px 28px rgba(148, 163, 184, 0.12);
    }

    .card h2 {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--primary);
    }

    .card p {
      font-size: 0.95rem;
      color: var(--muted);
      line-height: 1.5;
    }

    form {
      display: grid;
      gap: 1.1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    label {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      font-weight: 600;
      color: var(--muted);
      font-size: 0.9rem;
    }

    input, select, textarea {
      padding: 0.65rem 0.75rem;
      border-radius: 10px;
      border: 1px solid rgba(226, 232, 240, 0.8);
      background: white;
      font: inherit;
      transition: border 0.2s ease, box-shadow 0.2s ease;
      color: var(--text);
      resize: vertical;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.25);
    }

    .actions {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.45rem;
      border: none;
      border-radius: 10px;
      padding: 0.65rem 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      background: var(--primary);
      color: white;
      box-shadow: 0 10px 16px rgba(43, 108, 176, 0.22);
    }

    .button.secondary {
      background: rgba(45, 55, 72, 0.08);
      color: var(--text);
      box-shadow: none;
    }

    .button:hover {
      transform: translateY(-1px);
    }

    .split {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(226, 232, 240, 0.7);
    }

    thead {
      background: rgba(236, 245, 255, 0.8);
    }

    th, td {
      padding: 0.9rem 1rem;
      text-align: left;
      font-size: 0.92rem;
    }

    tbody tr:nth-child(even) {
      background: rgba(247, 250, 252, 0.55);
    }

    tbody tr:hover {
      background: rgba(66, 153, 225, 0.08);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: rgba(56, 178, 172, 0.18);
      color: var(--accent);
      font-weight: 600;
      font-size: 0.82rem;
    }

    .table-actions {
      display: inline-flex;
      gap: 0.5rem;
    }

    .table-actions button {
      border: none;
      cursor: pointer;
      padding: 0.35rem 0.6rem;
      border-radius: 8px;
      font-size: 0.82rem;
      font-weight: 600;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .table-actions .edit {
      background: rgba(66, 153, 225, 0.16);
      color: var(--primary);
    }

    .table-actions .delete {
      background: rgba(229, 62, 62, 0.12);
      color: var(--danger);
    }

    .empty-state {
      text-align: center;
      padding: 2rem 1rem;
      color: var(--muted);
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: space-between;
      align-items: center;
    }

    .search {
      flex: 1 1 240px;
      display: flex;
      align-items: center;
      border: 1px solid rgba(226, 232, 240, 0.8);
      border-radius: 10px;
      background: white;
      padding-inline: 0.75rem;
      gap: 0.5rem;
    }

    .search input {
      border: none;
      padding: 0.55rem 0;
      width: 100%;
      font: inherit;
      outline: none;
    }

    .tag {
      font-size: 0.82rem;
      color: white;
      background: var(--accent);
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      letter-spacing: 0.02em;
      font-weight: 600;
    }

    @media (max-width: 960px) {
      main {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 640px) {
      header {
        padding: 2rem 1.4rem;
      }

      nav {
        padding: 1rem 1.4rem;
      }

      main {
        padding: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>School Data Manager</h1>
      <p>
        Manage students, teachers, and classes in one place. Create, update, and track essential school data with a clean workflow and smart search.
      </p>
      <div class="stats" id="globalStats"></div>
    </header>
    <nav>
      <button class="nav-button active" data-section="students">Students</button>
      <button class="nav-button" data-section="teachers">Teachers</button>
      <button class="nav-button" data-section="classes">Classes</button>
    </nav>
    <main>
      <section id="section-students" class="active">
        <div class="card">
          <div>
            <h2>Student Profiles</h2>
            <p>Capture and manage student information, track grades, and assign homerooms.</p>
          </div>
          <form data-section="students">
            <input type="hidden" name="id">
            <label>
              Full Name
              <input type="text" name="name" placeholder="e.g. Jordan Matthews" required>
            </label>
            <label>
              Grade Level
              <select name="grade" required>
                <option value="" disabled selected>Select grade</option>
              </select>
            </label>
            <label>
              Homeroom Teacher
              <input type="text" name="homeroom" placeholder="e.g. Ms. Carter" required>
            </label>
            <label>
              Guardian Contact
              <input type="tel" name="contact" placeholder="e.g. (555) 867-5309" required>
            </label>
            <div class="actions">
              <button type="submit" class="button">Save Student</button>
              <button type="button" class="button secondary" data-reset>Clear</button>
            </div>
          </form>
        </div>
        <div class="card split">
          <div class="filters">
            <div class="search">
              <span>üîç</span>
              <input type="search" placeholder="Search students..." data-search="students">
            </div>
            <span class="tag" data-count="students">0 Students</span>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Grade</th>
                  <th>Homeroom</th>
                  <th>Contact</th>
                  <th></th>
                </tr>
              </thead>
              <tbody data-table="students"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="section-teachers">
        <div class="card">
          <div>
            <h2>Faculty Directory</h2>
            <p>Organize teacher assignments, contact information, and departmental roles.</p>
          </div>
          <form data-section="teachers">
            <input type="hidden" name="id">
            <label>
              Full Name
              <input type="text" name="name" placeholder="e.g. Avery Stone" required>
            </label>
            <label>
              Department
              <input type="text" name="department" placeholder="e.g. Mathematics" required>
            </label>
            <label>
              Email Address
              <input type="email" name="email" placeholder="e.g. avery.stone@school.edu" required>
            </label>
            <label>
              Phone Number
              <input type="tel" name="phone" placeholder="e.g. (555) 123-4567">
            </label>
            <div class="actions">
              <button type="submit" class="button">Save Teacher</button>
              <button type="button" class="button secondary" data-reset>Clear</button>
            </div>
          </form>
        </div>
        <div class="card split">
          <div class="filters">
            <div class="search">
              <span>üîç</span>
              <input type="search" placeholder="Search faculty..." data-search="teachers">
            </div>
            <span class="tag" data-count="teachers">0 Teachers</span>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Department</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th></th>
                </tr>
              </thead>
              <tbody data-table="teachers"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="section-classes">
        <div class="card">
          <div>
            <h2>Class Schedules</h2>
            <p>Track class offerings, room assignments, and schedules for quick reference.</p>
          </div>
          <form data-section="classes">
            <input type="hidden" name="id">
            <label>
              Class Name
              <input type="text" name="name" placeholder="e.g. Biology II" required>
            </label>
            <label>
              Instructor
              <input type="text" name="teacher" placeholder="e.g. Dr. Nguyen" required>
            </label>
            <label>
              Room
              <input type="text" name="room" placeholder="e.g. Lab 204" required>
            </label>
            <label>
              Schedule
              <textarea name="schedule" placeholder="e.g. Mon/Wed/Fri ¬∑ 10:30‚Äì11:45 AM" rows="2" required></textarea>
            </label>
            <div class="actions">
              <button type="submit" class="button">Save Class</button>
              <button type="button" class="button secondary" data-reset>Clear</button>
            </div>
          </form>
        </div>
        <div class="card split">
          <div class="filters">
            <div class="search">
              <span>üîç</span>
              <input type="search" placeholder="Search classes..." data-search="classes">
            </div>
            <span class="tag" data-count="classes">0 Classes</span>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Class</th>
                  <th>Instructor</th>
                  <th>Room</th>
                  <th>Schedule</th>
                  <th></th>
                </tr>
              </thead>
              <tbody data-table="classes"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const grades = ["Kindergarten", "1st Grade", "2nd Grade", "3rd Grade", "4th Grade", "5th Grade", "6th Grade", "7th Grade", "8th Grade", "9th Grade", "10th Grade", "11th Grade", "12th Grade"];

    const sectionConfigs = {
      students: {
        defaults: [
          { id: "stu-1001", name: "Jordan Matthews", grade: "11th Grade", homeroom: "Ms. Carter", contact: "(555) 832-1199" },
          { id: "stu-1002", name: "Priya Patel", grade: "9th Grade", homeroom: "Mr. Daniels", contact: "(555) 481-0773" },
          { id: "stu-1003", name: "Elias Bennett", grade: "8th Grade", homeroom: "Mrs. Wu", contact: "(555) 202-3399" }
        ],
        columns: ["name", "grade", "homeroom", "contact"]
      },
      teachers: {
        defaults: [
          { id: "tea-2001", name: "Avery Stone", department: "Mathematics", email: "avery.stone@school.edu", phone: "(555) 290-1818" },
          { id: "tea-2002", name: "Maya Hernandez", department: "Science", email: "maya.hernandez@school.edu", phone: "(555) 911-2232" },
          { id: "tea-2003", name: "Samuel Lee", department: "History", email: "samuel.lee@school.edu", phone: "(555) 664-3145" }
        ],
        columns: ["name", "department", "email", "phone"]
      },
      classes: {
        defaults: [
          { id: "cla-3001", name: "Biology II", teacher: "Dr. Nguyen", room: "Lab 204", schedule: "Mon/Wed/Fri ¬∑ 10:30‚Äì11:45 AM" },
          { id: "cla-3002", name: "World History", teacher: "Samuel Lee", room: "Room 112", schedule: "Tue/Thu ¬∑ 1:15‚Äì2:30 PM" },
          { id: "cla-3003", name: "Calculus Honors", teacher: "Avery Stone", room: "Room 305", schedule: "Mon‚ÄìFri ¬∑ 8:00‚Äì8:55 AM" }
        ],
        columns: ["name", "teacher", "room", "schedule"]
      }
    };

    const STORAGE_KEY = "school-data-manager-v1";
    const idPrefixes = { students: "stu", teachers: "tea", classes: "cla" };

    function getDefaultState() {
      return {
        students: sectionConfigs.students.defaults.map(item => ({ ...item })),
        teachers: sectionConfigs.teachers.defaults.map(item => ({ ...item })),
        classes: sectionConfigs.classes.defaults.map(item => ({ ...item }))
      };
    }

    let appState = loadState();
    let currentSection = "students";
    const searchFilters = {
      students: "",
      teachers: "",
      classes: ""
    };

    function loadState() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        try {
          const parsed = JSON.parse(stored);
          const defaults = getDefaultState();
          return {
            students: Array.isArray(parsed.students) ? parsed.students : defaults.students,
            teachers: Array.isArray(parsed.teachers) ? parsed.teachers : defaults.teachers,
            classes: Array.isArray(parsed.classes) ? parsed.classes : defaults.classes
          };
        } catch {
          console.warn("Failed to parse saved data. Restoring defaults.");
        }
      }
      return getDefaultState();
    }

    function escapeHtml(value) {
      const map = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      };
      return String(value).replace(/[&<>"']/g, char => map[char]);
    }

    function saveState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify({
        students: appState.students,
        teachers: appState.teachers,
        classes: appState.classes
      }));
    }

    function renderNavbarStats() {
      const stats = [
        { label: "Students", value: appState.students.length },
        { label: "Teachers", value: appState.teachers.length },
        { label: "Classes", value: appState.classes.length }
      ];
      const container = document.getElementById("globalStats");
      container.innerHTML = stats.map(stat => `
        <span class="stat-pill">
          <strong>${stat.value}</strong>
          ${stat.label}
        </span>
      `).join("");
      stats.forEach(({ label, value }) => {
        const key = label.toLowerCase();
        const target = document.querySelector(\`[data-count="\${key}"]\`);
        if (target) {
          const suffix = value === 1 ? label.slice(0, -1) : label;
          target.textContent = \`\${value} \${suffix}\`;
        }
      });
    }

    function renderTable(section) {
      const tbody = document.querySelector(\`[data-table="\${section}"]\`);
      if (!tbody) return;
      const config = sectionConfigs[section];
      const query = searchFilters[section]?.toLowerCase() ?? "";
      const entries = appState[section]
        .filter(entry =>
          !query ||
          Object.values(entry).some(value =>
            String(value).toLowerCase().includes(query)
          )
        );

      if (!entries.length) {
        tbody.innerHTML = \`
          <tr>
            <td colspan="\${config.columns.length + 1}" class="empty-state">
              No records yet. Add a new \${section.slice(0, -1)} to get started.
            </td>
          </tr>
        \`;
        return;
      }

      tbody.innerHTML = entries.map(entry => `
        <tr>
          ${config.columns.map(column => {
            const value = entry[column];
            if (column === "grade") {
              return \`<td><span class="pill">\${escapeHtml(value)}</span></td>\`;
            }
            return \`<td>\${escapeHtml(value ?? "")}</td>\`;
          }).join("")}
          <td>
            <div class="table-actions">
              <button type="button" class="edit" data-action="edit" data-section="${section}" data-id="${escapeHtml(entry.id)}">Edit</button>
              <button type="button" class="delete" data-action="delete" data-section="${section}" data-id="${escapeHtml(entry.id)}">Delete</button>
            </div>
          </td>
        </tr>
      `).join("");
    }

    function populateGradeSelect() {
      const select = document.querySelector('form[data-section="students"] select[name="grade"]');
      if (!select) return;
      select.innerHTML = "";
      const placeholder = document.createElement("option");
      placeholder.value = "";
      placeholder.disabled = true;
      placeholder.selected = true;
      placeholder.textContent = "Select grade";
      select.appendChild(placeholder);
      grades.forEach(grade => {
        const option = document.createElement("option");
        option.value = grade;
        option.textContent = grade;
        select.appendChild(option);
      });
    }

    function handleNavClick(event) {
      const button = event.target.closest(".nav-button");
      if (!button) return;
      document.querySelectorAll(".nav-button").forEach(btn => btn.classList.toggle("active", btn === button));
      const section = button.dataset.section;
      if (!section) return;
      currentSection = section;
      document.querySelectorAll("main section").forEach(node => {
        node.classList.toggle("active", node.id === \`section-\${section}\`);
      });
      renderTable(section);
    }

    function handleFormSubmit(event) {
      event.preventDefault();
      const form = event.target;
      if (!(form instanceof HTMLFormElement)) return;
      const section = form.dataset.section;
      if (!section) return;
      const formData = new FormData(form);
      const id = formData.get("id") || generateId(section);
      const entry = { id };
      formData.forEach((value, key) => {
        if (key === "id") return;
        entry[key] = String(value).trim();
      });

      appState[section] = appState[section].some(item => item.id === id)
        ? appState[section].map(item => (item.id === id ? entry : item))
        : [...appState[section], entry];

      saveState();
      renderTable(section);
      renderNavbarStats();
      form.reset();
      const idField = form.querySelector('input[name="id"]');
      if (idField) idField.value = "";
      const selectFields = form.querySelectorAll("select");
      selectFields.forEach(select => {
        if (select.options.length) {
          select.selectedIndex = 0;
        }
      });
    }

    function handleTableClick(event) {
      const target = event.target;
      if (!(target instanceof HTMLElement)) return;
      const action = target.dataset.action;
      const section = target.dataset.section;
      const id = target.dataset.id;
      if (!action || !section || !id) return;

      if (action === "edit") {
        const form = document.querySelector(\`form[data-section="\${section}"]\`);
        if (!(form instanceof HTMLFormElement)) return;
        const entry = appState[section].find(item => item.id === id);
        if (!entry) return;
        form.querySelector('input[name="id"]').value = entry.id;
        Object.entries(entry).forEach(([key, value]) => {
          if (key === "id") return;
          const field = form.querySelector(\`[name="\${key}"]\`);
          if (field) field.value = value;
        });
        form.scrollIntoView({ behavior: "smooth", block: "center" });
      }

      if (action === "delete") {
        appState[section] = appState[section].filter(item => item.id !== id);
        saveState();
        renderTable(section);
        renderNavbarStats();
      }
    }

    function generateId(section) {
      const prefix = idPrefixes[section] ?? "itm";
      if (window.crypto && typeof window.crypto.randomUUID === "function") {
        return \`\${prefix}-\${crypto.randomUUID().slice(0, 8)}\`;
      }
      const random = Math.random().toString(36).slice(2, 8);
      const timestamp = Date.now().toString(36);
      return \`\${prefix}-\${timestamp}-\${random}\`;
    }

    function handleReset(event) {
      const button = event.target.closest("[data-reset]");
      if (!button) return;
      const form = button.closest("form");
      if (form instanceof HTMLFormElement) {
        form.reset();
        form.querySelector('input[name="id"]').value = "";
        form.querySelectorAll("select").forEach(select => {
          if (select.options.length) {
            select.selectedIndex = 0;
          }
        });
      }
    }

    function handleSearch(event) {
      const input = event.target;
      if (!(input instanceof HTMLInputElement)) return;
      const section = input.dataset.search;
      if (!section) return;
      searchFilters[section] = input.value || "";
      renderTable(section);
    }

    function init() {
      populateGradeSelect();
      renderNavbarStats();
      renderTable("students");
      document.querySelectorAll("[data-search]").forEach(input => {
        if (input instanceof HTMLInputElement) {
          input.value = searchFilters[input.dataset.search] ?? "";
        }
      });

      document.addEventListener("click", handleNavClick);
      document.addEventListener("click", handleReset);
      document.addEventListener("click", handleTableClick);
      document.querySelectorAll("form").forEach(form => {
        form.addEventListener("submit", handleFormSubmit);
      });
      document.querySelectorAll("[data-search]").forEach(input => {
        input.addEventListener("input", handleSearch);
      });
    }

    window.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
